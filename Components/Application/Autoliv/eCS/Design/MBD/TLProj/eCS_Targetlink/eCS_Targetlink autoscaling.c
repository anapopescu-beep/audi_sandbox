/**************************************************************************************************\
 *** 
 *** Simulink model       : eCS_Algo_Simulation_2015b_autoscaling
 *** TargetLink subsystem : eCS_Algo_Simulation_2015b_autoscaling/eCS_Targetlink
 *** Codefile             : eCS_Targetlink.c
 ***
 *** Generated by TargetLink, the dSPACE production quality code generator
 *** Generation date: 2020-10-07 10:26:46
 ***
 *** CODE GENERATOR OPTIONS:
 *** Code generation mode                     : AUTOSAR
 *** AUTOSAR version                          : 4.2.2
 *** Compiler                                 : <unknown>
 *** Target                                   : Generic
 *** ANSI-C compatible code                   : yes
 *** Code Optimization                        : enabled
 *** Constant style                           : decimal
 *** Clean code option                        : enabled
 *** Logging mode                             : Do not log anything
 *** Code Coverage                            : disabled
 *** Generate empty conditional branches      : disabled
 *** Loop unroll threshold                    : 5
 *** Shift mode                               : automatic
 *** Handle unscaled SF expr. with TL type    : enabled
 *** Assignment of conditions                 : AllBooleanOutputs 
 *** Scope reduction only to function level   : disabled
 *** Exploit ranges if not erasable           : disabled
 *** Exploit Compute Through Overflow         : optimized
 *** Linker sections                          : enabled
 *** Enable Assembler                         : disabled
 *** Variable name length                     : 31 chars
 *** Use global bitfields                     : disabled
 *** Stateflow: use of bitfields              : enabled
 *** State activity encoding limit            : 5
 *** Omit zero inits in restart function      : disabled
 *** Share functions between TL subsystems    : disabled
 *** Generate 64bit functions                 : enabled
 *** Inlining Threshold                       : 6
 *** Line break limit                         : 100
 *** Target optimized boolean data type       : enabled
 *** Keep saturation elements                 : disabled
 *** Extended variable sharing                : disabled
 *** Extended lifetime optimization           : enabled
 *** Style definition file                    : C:\Program Files\dSPACE TargetLink 4.2\Matlab\Tl\Con
 ***                                            fig\codegen\cconfig.xml
 *** Root style sheet                         : C:\Program Files\dSPACE TargetLink 4.2\Matlab\Tl\XML
 ***                                            \CodeGen\Stylesheets\TL_CSourceCodeSS.xsl
 ***
 *** SUBSYS                   CORRESPONDING SIMULINK SUBSYSTEM
 *** Sa1                      eCS_Targetlink
 *** Sa2                      eCS_Targetlink/eCS_Algo_in_m_per_s-2
 *** Sa3                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo
 *** Sa4                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration
 *** Sa5                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time
 *** Sa6                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar
 *** Sa7                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration C
 ***                          lipping
 *** Sa8                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration C
 ***                          lipping/If ActionSubsystem
 *** Sa9                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration C
 ***                          lipping/Reset timer
 *** Sa10                     eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration C
 ***                          lipping/If ActionSubsystem/Clear Trigger 
 *** Sa11                     eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration C
 ***                          lipping/If ActionSubsystem/Decrease Timer
 *** Sa12                     eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/CheckTimer 
 ***                          value
 *** Sa13                     eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/CheckTimer 
 ***                          value1
 *** Sa14                     eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/If ActionSu
 ***                          bsystem
 *** Sa15                     eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/If ActionSu
 ***                          bsystem1
 *** 
 *** SUBSYS                   CORRESPONDING MODEL BLOCK (REFERENCED MODEL)
 *** 
 *** SF-NODE   CORRESPONDING STATEFLOW NODE                           DESCRIPTION
 *** 
 *** TargetLink version      : 4.2 from 14-Oct-2016
 *** Code generator version  : Build Id 4.2.0.26 from 2016-10-17 16:31:48

\**************************************************************************************************/

#ifndef ECS_TARGETLINK_C
#define ECS_TARGETLINK_C

/*----------------------------------------------------------------------------*\
  DEFINES (OPT)
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  INCLUDES
\*----------------------------------------------------------------------------*/

#include "eCS_Targetlink.h"
#include "eCS_Config.h"
#include "dsfxp.h"

/*----------------------------------------------------------------------------*\
  ENUMS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  DEFINES
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  TYPEDEFS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  VARIABLES
\*----------------------------------------------------------------------------*/

/******************************************************************************\
   MERGEABLE_CONST: mergeable constants (ROM) | Width: 16
\******************************************************************************/
MERGEABLE_CONST uint16 AU16_LUT_CALLOTE_ANGLE_1_IDX_SI[3] = 
{
   /* [0..2] */ 0, 42, 4194
   /* 0., 2e-05, 0.002 */
}; /* 
   Unit: m
   LSB: 2^-21 OFF: 0, different constrained ranges */
MERGEABLE_CONST sint16 AU16_LUT_CALLOTE_ANGLE_2_IDX_SI[4] = 
{
   /* [0..3] */ 0, 839, 1049, 2097
   /* 0., 0.0004, 0.0005, 0.001 */
}; /* 
   Unit: m
   LSB: 2^-21 OFF: 0, different constrained ranges */
MERGEABLE_CONST uint16 U_LUT_CALLOTE_ANGLE_1_FACT_SI[3] = 
{
   /* [0..2] */ 0, 32768, 32768
   /* 0., 1., 1. */
}; /* 
   Unit: %
   LSB: 2^-15 OFF: 0, different constrained ranges */
MERGEABLE_CONST uint16 U_LUT_CALLOTE_ANGLE_2_FACT_SI[4] = 
{
   /* [0..3] */ 0, 0, 16384, 16384
   /* 0., 0., 1., 1. */
}; /* 
   Unit: %
   LSB: 2^-14 OFF: 0, different constrained ranges */

/******************************************************************************\
   MERGEABLE_CONST: mergeable constants (ROM) | Width: N.A.
\******************************************************************************/
MERGEABLE_CONST MAP_Tab1DS0I2T521_a CalotteAngle1_LUT = {
   3, /* Nx: Description: number of axis points */
   &(AU16_LUT_CALLOTE_ANGLE_1_IDX_SI[0]), /* x_table: Description: vector with axis values */
   &(U_LUT_CALLOTE_ANGLE_1_FACT_SI[0]) /* z_table: Description: vector with table values */
};

MERGEABLE_CONST MAP_Tab1DS0I2T524_a CalotteAngle2_LUT = {
   4, /* Nx: Description: number of axis points */
   &(AU16_LUT_CALLOTE_ANGLE_2_IDX_SI[0]), /* x_table: Description: vector with axis values */
   &(U_LUT_CALLOTE_ANGLE_2_FACT_SI[0]) /* z_table: Description: vector with table values */
};

/******************************************************************************\
   SLGlobal: Default storage class for global variables | Width: 16
\******************************************************************************/
sint16 Sa1_Ax__m_s_2_; /* 
   Unit: m.s-2
   LSB: 2^-9 OFF: 0 MIN/MAX: -39.228 .. 39.228 */
sint16 Sa1_Ay__m_s_2_; /* 
   Unit: m.s-2
   LSB: 2^-9 OFF: 0 MIN/MAX: -39.228 .. 39.228 */
sint16 s16BallPosition; /* 
   Unit: mm
   LSB: 0.0001 OFF: 0 MIN/MAX: -3.2768 .. 3.2767 */

/******************************************************************************\
   SLGlobal: Default storage class for global variables | Width: 8
\******************************************************************************/
boolean b8eCSTrigger; /* 
   Unit: mm
   LSB: 2^0 OFF: 0 MIN/MAX: 0 .. 1 */

/******************************************************************************\
   SLStaticGlobal: Default storage class for global static variables | Width: 16
\******************************************************************************/
static uint16 Sa6_Polar_radius; /* 
   Unit: m
   LSB: 2^-25 OFF: 0 MIN/MAX: 0 .. 0.00195309519767761 */
static sint16 Sa7_CrashTrigger;

/******************************************************************************\
   SLStaticGlobal: Default storage class for global static variables | Width: 8
\******************************************************************************/
static boolean Sa3_Relay; /* 
   Unit: m
   LSB: 2^0 OFF: 0 MIN/MAX: 0 .. 1 */

/*----------------------------------------------------------------------------*\
  PARAMETERIZED MACROS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  FUNCTION PROTOTYPES
\*----------------------------------------------------------------------------*/

/******************************************************************************\
   StaticFcnSpecStep: Default function class for static model step functions
\******************************************************************************/
static void ComputeBallPosition(void);

static void CrashDetectionMtrPerSecSqd(void);

/*----------------------------------------------------------------------------*\
  INLINE FUNCTIONS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  FUNCTION DEFINITIONS
\*----------------------------------------------------------------------------*/

/**************************************************************************************************\
 ***  FUNCTION:
 ***      eCS_Targetlink
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
void eCS_Targetlink(void)
{
   /* SLLocal: Default storage class for local variables | Width: 8 */
   boolean Sa2_mergedTrigger;

   /* SLLocalInit: Default storage class for local variables with init value | Width: 16 */
   uint16 Sa5_Merge1;

   /* SLLocalInit: Default storage class for local variables with init value | Width: 8 */
   boolean Sa5_Merge;

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 16
    */
   static uint16 X_Sa5_Unit_Delay = 0;

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 8
    */
   static uint8 X_Sa5_Unit_Delay2 = 0;
   static boolean X_Sa5_isStarted = 0;

   /* call of function: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo */
   ComputeBallPosition();

   /* call of function: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration */
   CrashDetectionMtrPerSecSqd();

   /* Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/mergedTrigger */
   Sa2_mergedTrigger = Sa3_Relay || (Sa7_CrashTrigger != 0);

   /* # combined # Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/Logical Opera
      tor
      # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/Relational
       Operator
      # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/Relational
       Operator1
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/Relational Operator1: Omitted compa
      rison with constant. */
   if ((!(Sa2_mergedTrigger)) && (X_Sa5_Unit_Delay2 == 1)) {
      /* Reference of merge block: Merge1 eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time
         /Merge1
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold
          Time/If Action
         Subsystem/Constant1 */
      Sa5_Merge1 = 0;

      /* Reference of merge block: Merge eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/
         Merge
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold
          Time/If Action
         Subsystem/Constant */
      Sa5_Merge = 1;
   }
   else {
      /* Reference of merge block: Merge1 eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time
         /Merge1
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold
          Time/If Action
         Subsystem1/oldTmr */
      Sa5_Merge1 = X_Sa5_Unit_Delay;

      /* Reference of merge block: Merge eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/
         Merge
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold
          Time/If Action
         Subsystem1/b8OldIsTmrStarted */
      Sa5_Merge = X_Sa5_isStarted;
   }

   /* Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/Unit Delay2 */
   X_Sa5_Unit_Delay2 = (uint8) Sa2_mergedTrigger;

   /* # combined # eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/TmrStarted */
   if (Sa5_Merge) {
      /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/CheckTimer value/RollingCnt
         r
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/Unit De
         lay */
      X_Sa5_Unit_Delay = (uint16) (Sa5_Merge1 + 1);

      /* Reference of merge block: Merge3 eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time
         /Merge3
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold
          Time/CheckTimer value/Rescaler
         # combined # TargetLink outport: eCS_Targetlink/b8eCSTrigg
         # combined # eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/TriggFiltered
         # combined # eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/CheckTimer value/Re
         scaler */
      b8eCSTrigger = 1;

      /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/CheckTimer value/Switch
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/Unit De
         lay */
      X_Sa5_isStarted = X_Sa5_Unit_Delay < ECS_HOLDING_TRIGGER;
   }
   else {
      /* Reference of merge block: Merge3 eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time
         /Merge3
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold
          Time/CheckTimer value1/b8Trigger
         # combined # TargetLink outport: eCS_Targetlink/b8eCSTrigg
         # combined # eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/TriggFiltered */
      b8eCSTrigger = Sa2_mergedTrigger;

      /* Reference of merge block: Merge2 eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time
         /Merge2
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold
          Time/CheckTimer value1/Constant1
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Trigger Hold Time/isStart
         ed */
      X_Sa5_isStarted = 0;
   }

   /* TargetLink outport: eCS_Targetlink/sBall
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/mToMm */
   s16BallPosition = (sint16) ((((uint32) (uint16) ((((uint32) Sa6_Polar_radius) * MToMM) >> 11)) *
    625) >> 10);
}

/*----------------------------------------------------------------------------*\
  MODULE LOCAL FUNCTION DEFINITIONS
\*----------------------------------------------------------------------------*/

/**************************************************************************************************\
 ***  FUNCTION:
 ***      ComputeBallPosition
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
static void ComputeBallPosition(void)
{
   /* SLLocal: Default storage class for local variables | Width: 32 */
   uint32 Sa6_Sum; /* 
      Unit: m
      LSB: 2^-42 OFF: 0 MIN/MAX: 0 .. 2e-06 */

   /* SLLocal: Default storage class for local variables | Width: 16 */
   sint16 DD_Sa3_IntegSx; /* 
      Unit: m
      LSB: 2^-21 OFF: 0 MIN/MAX: -0.001 .. 0.001 */
   sint16 DD_Sa3_IntegSy; /* 
      Unit: m
      LSB: 2^-21 OFF: 0 MIN/MAX: -0.015625 .. 0.0156245231628418 */
   sint16 Sa3_IntegVx; /* 
      Unit: m.s-1
      LSB: 2^-16 OFF: 0 MIN/MAX: -0.5 .. 0.499984741210938 */
   sint16 Sa3_IntegVy; /* 
      Unit: m.s-1
      LSB: 2^-16 OFF: 0 MIN/MAX: -0.5 .. 0.499984741210938 */
   sint16 Sa3_g_to_m_s_; /* 
      Unit: m.s-2
      LSB: 2^-9 OFF: 0 MIN/MAX: -64 .. 63.998046875 */
   sint16 Sa6_Polar_Theta; /* 
      Unit: rad
      LSB: 2^-13 OFF: 0 MIN/MAX: -3.14 .. 3.14 */
   uint16 Sa6_Sqrt; /* 
      Unit: m
      LSB: 2^-25 OFF: 0 MIN/MAX: 0 .. 0.00195309519767761 */

   /* SLLocal: Default storage class for local variables | Width: 32 */
   sint32 Aux_S32;
   sint32 Aux_S32_a;

   /* SLLocal: Default storage class for local variables | Width: 16 */
   sint16 Aux_S16;
   sint16 Aux_S16_a;
   sint16 Aux_S16_b;
   uint16 Aux_U16;

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 32
    */
   static sint32 X_Sa3_IntegSx = 0; /* LSB: 7.62939453125e-09 OFF: 0 MIN/MAX: -0.00125 .. 0.00124999
   237060547 */
   static sint32 X_Sa3_IntegSy = 0; /* LSB: 7.62939453125e-09 OFF: 0 MIN/MAX: -0.00125 .. 0.00124999
   237060547 */
   static sint32 X_Sa3_IntegVx = 0; /* LSB: 7.62939453125e-09 OFF: 0 MIN/MAX: -0.5 .. 0.499984741210
   938 */
   static sint32 X_Sa3_IntegVy = 0; /* LSB: 7.62939453125e-09 OFF: 0 MIN/MAX: -0.5 .. 0.499984741210
   938 */

   /* Discrete Integrator: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/IntegSx */
   DD_Sa3_IntegSx = (sint16) (((sint32) (X_Sa3_IntegSx << 1)) / ((sint32) 125));

   /* Discrete Integrator: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/IntegSy */
   DD_Sa3_IntegSy = (sint16) (((sint32) (X_Sa3_IntegSy << 1)) / ((sint32) 125));

   /* Trig: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/Polar_Theta */
   Aux_S32 = ((sint32) DD_Sa3_IntegSx) * ((sint32) DD_Sa3_IntegSx);
   Sa6_Polar_Theta = F__I16ATAN2I16(DD_Sa3_IntegSy, Aux_S32, DD_Sa3_IntegSx);

   /* Trig: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/yFactor */
   Aux_S16 = (sint16) ((((sint32) Sa6_Polar_Theta) * 33215) / ((sint32) 26087));

   /* Trig: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/xFactor */
   Aux_S16_a = (sint16) ((((sint32) Sa6_Polar_Theta) * 33215) / ((sint32) 26087));

   /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/Sum
      # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/sBallY²
      # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/sBallX²
    */
   Sa6_Sum = (((uint32) DD_Sa3_IntegSx) * ((uint32) DD_Sa3_IntegSx)) + (((uint32) DD_Sa3_IntegSy) *
    ((uint32) DD_Sa3_IntegSy));

   /* Sqrt: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/Sqrt */
   if (Sa6_Sum <= 0) {
      Sa6_Sqrt = 0;
   }
   else {
      C__U16SQRTU32(Sa6_Sum, Aux_U16);
      Sa6_Sqrt = (uint16) (Aux_U16 << 4);
   }

   /* Saturation: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/Polar_radius
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/Polar_radius: Omitted lower s
      aturation */
   Aux_U16 = (uint16) (BALL_POS_MAX_SI << 4);
   Sa6_Polar_radius = C__U16SATU16_SATu(Sa6_Sqrt, Aux_U16);

   /* Relay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Relay */
   if (((uint16) (Sa6_Polar_radius >> 2)) >= ECS_TRIGGER_ON_SI) {
      Sa3_Relay = 1;
   }
   else {
      if (Sa6_Polar_radius <= ((uint16) (ECS_TRIGGER_OFF_SI << 2))) {
         Sa3_Relay = 0;
      }
   }

   /* Trig: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Sin
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/grad in rad1
      # combined # Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Angle
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/CalotteAngle2
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/CalotteAngle1
      # combined # TableLookup: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Lut_Angle_1
      # combined # TableLookup: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Lut_Angle_2 */
   Aux_S16_b = (sint16) ((((sint32) (sint16) ((((sint32) (sint16) (((sint16) ((((sint32) (uint16)
    (Tab1DS0I2T521_a(&CalotteAngle1_LUT, (uint16) (Sa6_Polar_radius >> 4)) >> 1)) * ((sint32)
    S16_CALOTTE_ANGLE_1)) >> 14)) + ((sint16) ((((sint32) (sint16)
    Tab1DS0I2T524_a(&CalotteAngle2_LUT, (sint16) (Sa6_Polar_radius >> 4))) * ((sint32)
    S16_CALOTTE_ANGLE_2)) >> 14)))) * 18301) >> 16)) * 165849) / 260515);

   /* Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/g to m.s² */
   Sa3_g_to_m_s_ = (sint16) ((((sint32) F__I16SINI16(Aux_S16_b)) * 40169) >> 17);

   /* Discrete Integrator: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/IntegVx */
   Sa3_IntegVx = (sint16) (X_Sa3_IntegVx / ((sint32) 2000));

   /* Discrete Integrator: integration */
   X_Sa3_IntegSx = X_Sa3_IntegSx + ((sint32) Sa3_IntegVx);

   /* Discrete Integrator: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/IntegVy */
   Sa3_IntegVy = (sint16) (X_Sa3_IntegVy / ((sint32) 2000));

   /* Discrete Integrator: integration */
   X_Sa3_IntegSy = X_Sa3_IntegSy + ((sint32) Sa3_IntegVy);

   /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Add */
   Aux_S32 = (sint32) Sa1_Ax__m_s_2_;

   /* # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Product */
   Aux_S32 -= ((sint32) (sint16) ((((sint32) F__I16COSI16(Aux_S16_a)) * ((sint32) Sa3_g_to_m_s_)) >>
     14));

   /* Discrete Integrator: integration
      # combined # Saturation: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat: Omitted upper saturation
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat: Omitted lower saturation
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/ball damper */
   X_Sa3_IntegVx += (((sint32) (Aux_S32 << 7)) - ((sint32) (((sint32) ((((sint32) Sa3_IntegVx) *
    BALL_DAMPER_COEFF) << 7)) >> 7)));

   /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Add */
   Aux_S32 = (sint32) Sa1_Ay__m_s_2_;

   /* # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Product1 */
   Aux_S32 -= ((sint32) (sint16) ((((sint32) Sa3_g_to_m_s_) * ((sint32) F__I16SINI16(Aux_S16))) >>
    14));

   /* Discrete Integrator: integration
      # combined # Saturation: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat: Omitted upper saturation
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat: Omitted lower saturation
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/ball damper */
   X_Sa3_IntegVy += (((sint32) (Aux_S32 << 7)) - ((sint32) (((sint32) ((((sint32) Sa3_IntegVy) *
    BALL_DAMPER_COEFF) << 7)) >> 7)));

   /* Discrete Integrator: saturation */
   Aux_S32 = (sint32) ((((uint32) BALL_POS_MAX_SI) * 125) >> 1);
   Aux_S32_a = (sint32) ((((sint32) BALL_POS_MIN_SI) * 125) >> 1);
   X_Sa3_IntegSx = C__I32SATI32_SATb(X_Sa3_IntegSx, Aux_S32, Aux_S32_a);

   /* Discrete Integrator: saturation */
   Aux_S32 = (sint32) ((((uint32) BALL_POS_MAX_SI) * 125) >> 1);
   Aux_S32_a = (sint32) ((((sint32) BALL_POS_MIN_SI) * 125) >> 1);
   X_Sa3_IntegSy = C__I32SATI32_SATb(X_Sa3_IntegSy, Aux_S32, Aux_S32_a);
}

/**************************************************************************************************\
 ***  FUNCTION:
 ***      CrashDetectionMtrPerSecSqd
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
static void CrashDetectionMtrPerSecSqd(void)
{
   /* SLLocal: Default storage class for local variables | Width: 32 */
   uint32 Sa4_Sum; /* LSB: 2^-18 OFF: 0 MIN/MAX: 0 .. 16383.9999961853 */

   /* SLLocal: Default storage class for local variables | Width: 16 */
   uint16 Sa4_Ax_Ay_Norm; /* 
      Unit: m.s-2
      LSB: 2^-9 OFF: 0 MIN/MAX: 0 .. 127.998046875 */

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 16
    */
   static uint16 X_Sa7_u8OldTimer = 0;

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 8
    */
   static uint8 X_Sa7_Unit_Delay = 0;
   static boolean X_Sa7_u8OldTrigger = 0;

   /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Sum
      # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Ay²
      # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Ax² */
   Sa4_Sum = (((uint32) Sa1_Ax__m_s_2_) * ((uint32) Sa1_Ax__m_s_2_)) + (((uint32) Sa1_Ay__m_s_2_) *
    ((uint32) Sa1_Ay__m_s_2_));

   /* Sqrt: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Ax²Ay²Norm */
   if (Sa4_Sum <= 0) {
      Sa4_Ax_Ay_Norm = 0;
   }
   else {
      C__U16SQRTU32(Sa4_Sum, Sa4_Ax_Ay_Norm);
   }

   /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/AccelThr
      eshold */
   if (Sa4_Ax_Ay_Norm >= CRASH_ACCEL_TRHD_M_PER_S_S) {
      /* SLLocal: Default storage class for local variables | Width: 8 */
      uint8 Sa7_SampleCntr;

      /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/SampleCn
         tr */
      Sa7_SampleCntr = (uint8) (X_Sa7_Unit_Delay + 1);

      /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/Accel
         Threshold
         # combined # Saturation: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/Saturation
         eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/Saturation: O
         mitted lower saturation
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/Unit Delay */
      X_Sa7_Unit_Delay = C__U8SATU8_SATu(Sa7_SampleCntr, 3);
   }
   else {
      /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/Accel
         Threshold
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/Unit Delay */
      X_Sa7_Unit_Delay = 0;
   }

   /* # combined # Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Cli
      pping/EnoughSamples
      # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
      Clipping/Relational Operator1
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/Relational Opera
      tor1: Omitted comparison with constant.
      # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
      Clipping/Relational Operator
      # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
      Clipping/Unit Delay */
   if ((X_Sa7_Unit_Delay >= CRASH_SAMPLES_NB) && (!(X_Sa7_u8OldTrigger))) {
      /* Reference of merge block: Merge eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acc
         eleration Clipping/Merge
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Accelerati
         on/Acceleration Clipping/Reset timer/HoldingTime1
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/u8OldTrigger */
      X_Sa7_u8OldTrigger = 1;

      /* Reference of merge block: Merge1 eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Ac
         celeration Clipping/Merge1
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Accelerati
         on/Acceleration Clipping/Reset timer/HoldingTime
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/u8OldTimer */
      X_Sa7_u8OldTimer = CRASH_HOLDING_TMR;
   }
   else {
      /* # combined # Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
         Clipping/If Action Subsystem/Logical Operator1
         # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/If Action Subsystem/Relational Operator4
         # combined # Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
         Clipping/If Action Subsystem/Logical Operator
         # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/If Action Subsystem/Relational Operator3
         eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/If Action Sub
         system/Relational Operator3: Omitted comparison with constant.
         # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/If Action Subsystem/Relational Operator2
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/Unit Delay */
      if ((X_Sa7_Unit_Delay < CRASH_SAMPLES_NB) && X_Sa7_u8OldTrigger && (X_Sa7_u8OldTimer == 0)) {
         /* Reference of merge block: Merge eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/
            Acceleration Clipping/Merge
            update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceler
            ation/Acceleration Clipping/If Action
            Subsystem/Clear Trigger /Constant1
            # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceler
            ation Clipping/u8OldTrigger */
         X_Sa7_u8OldTrigger = 0;
      }
      else {
         /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/If
             Action Subsystem/Decrease Timer/HoldingTimer */
         if (X_Sa7_u8OldTimer != 0) {
            /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping
               /If Action Subsystem/Decrease Timer/HoldingTimer
               # combined # Reference of merge block: Merge1 eCS_Targetlink/eCS_Algo_in_m_per_s-2/Cr
               ash Acceleration/Acceleration Clipping/Merge1
               update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acce
               leration/Acceleration Clipping/If Action
               Subsystem/Decrease Timer/HoldingTimer
               # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acce
               leration Clipping/u8OldTimer
               # combined # Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleratio
               n Clipping/If Action Subsystem/Decrease Timer/Sum */
            X_Sa7_u8OldTimer = (uint16) (X_Sa7_u8OldTimer - 1);
         }
         else {
            /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping
               /If Action Subsystem/Decrease Timer/HoldingTimer
               # combined # Reference of merge block: Merge1 eCS_Targetlink/eCS_Algo_in_m_per_s-2/Cr
               ash Acceleration/Acceleration Clipping/Merge1
               update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acce
               leration/Acceleration Clipping/If Action
               Subsystem/Decrease Timer/HoldingTimer
               # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acce
               leration Clipping/u8OldTimer */
            X_Sa7_u8OldTimer = 0;
         }
      }
   }

   /* eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/CrashTrigger
      # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
      Clipping/u8OldTrigger */
   Sa7_CrashTrigger = (sint16) X_Sa7_u8OldTrigger;
}

#endif /* ECS_TARGETLINK_C */
/*----------------------------------------------------------------------------*\
  END OF FILE
\*----------------------------------------------------------------------------*/
