/**************************************************************************************************\
 *** 
 *** Simulink model       : eCS_Algo_Simulation_2015b
 *** TargetLink subsystem : eCS_Algo_Simulation_2015b/eCS_Targetlink
 *** Codefile             : eCS_Targetlink.c
 ***
 *** Generated by TargetLink, the dSPACE production quality code generator
 *** Generation date: 2021-12-02 14:28:33
 ***
 *** CODE GENERATOR OPTIONS:
 *** Code generation mode                     : AUTOSAR
 *** AUTOSAR version                          : 4.2.2
 *** Compiler                                 : <unknown>
 *** Target                                   : Generic
 *** ANSI-C compatible code                   : yes
 *** Code Optimization                        : enabled
 *** Constant style                           : decimal
 *** Clean code option                        : enabled
 *** Logging mode                             : Do not log anything
 *** Code Coverage                            : disabled
 *** Generate empty conditional branches      : disabled
 *** Loop unroll threshold                    : 5
 *** Shift mode                               : automatic
 *** Handle unscaled SF expr. with TL type    : enabled
 *** Assignment of conditions                 : AllBooleanOutputs 
 *** Scope reduction only to function level   : disabled
 *** Exploit ranges if not erasable           : disabled
 *** Exploit Compute Through Overflow         : optimized
 *** Linker sections                          : enabled
 *** Enable Assembler                         : disabled
 *** Variable name length                     : 31 chars
 *** Use global bitfields                     : disabled
 *** Stateflow: use of bitfields              : enabled
 *** State activity encoding limit            : 5
 *** Omit zero inits in restart function      : disabled
 *** Share functions between TL subsystems    : disabled
 *** Generate 64bit functions                 : enabled
 *** Inlining Threshold                       : 6
 *** Line break limit                         : 100
 *** Target optimized boolean data type       : enabled
 *** Keep saturation elements                 : disabled
 *** Extended variable sharing                : disabled
 *** Extended lifetime optimization           : enabled
 *** Style definition file                    : C:\Program Files\dSPACE TargetLink 4.2\Matlab\Tl\Con
 ***                                            fig\codegen\cconfig.xml
 *** Root style sheet                         : C:\Program Files\dSPACE TargetLink 4.2\Matlab\Tl\XML
 ***                                            \CodeGen\Stylesheets\TL_CSourceCodeSS.xsl
 ***
 *** SUBSYS                   CORRESPONDING SIMULINK SUBSYSTEM
 *** Sa1                      eCS_Targetlink
 *** Sa2                      eCS_Targetlink/eCS_Algo_in_m_per_s-2
 *** Sa3                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo
 *** Sa4                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration
 *** Sa5                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output
 *** Sa6                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar
 *** Sa7                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration C
 ***                          lipping
 *** Sa8                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration C
 ***                          lipping/If ActionSubsystem
 *** Sa9                      eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration C
 ***                          lipping/Reset timer
 *** Sa10                     eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration C
 ***                          lipping/If ActionSubsystem/Clear Trigger 
 *** Sa11                     eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration C
 ***                          lipping/If ActionSubsystem/Decrease Timer
 *** 
 *** SUBSYS                   CORRESPONDING MODEL BLOCK (REFERENCED MODEL)
 *** 
 *** SF-NODE   CORRESPONDING STATEFLOW NODE                           DESCRIPTION
 *** 
 *** TargetLink version      : 4.2 from 14-Oct-2016
 *** Code generator version  : Build Id 4.2.0.26 from 2016-10-17 16:31:48

\**************************************************************************************************/

#ifndef ECS_TARGETLINK_C
#define ECS_TARGETLINK_C

/*----------------------------------------------------------------------------*\
  DEFINES (OPT)
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  INCLUDES
\*----------------------------------------------------------------------------*/

#include "eCS_Targetlink.h"
#include "eCS_Config.h"
#include "dsfxp.h"

/*----------------------------------------------------------------------------*\
  ENUMS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  DEFINES
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  TYPEDEFS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  VARIABLES
\*----------------------------------------------------------------------------*/

/******************************************************************************\
   MERGEABLE_CONST: mergeable constants (ROM) | Width: N.A.
\******************************************************************************/
MERGEABLE_CONST MAP_Tab1DS0I2T521_a CalotteAngle1_LUT = {
   3, /* Nx: Description: number of axis points */
   (const uint16 *) &(CAL_AU16_CALOTTE_ANGLE_1_IDX[0]), /* x_table: Description: vector with axis va
   lues */
   (const uint16 *) &(CAL_AU16_LUT_CALLOTE_ANGLE_1_FACT[0]) /* z_table: Description: vector with tab
   le values */
};

MERGEABLE_CONST MAP_Tab1DS0I2T521_a CalotteAngle2_LUT = {
   4, /* Nx: Description: number of axis points */
   (const uint16 *) &(CAL_AU16_CALOTTE_ANGLE_2_IDX[0]), /* x_table: Description: vector with axis va
   lues */
   (const uint16 *) &(CAL_AU16_LUT_CALLOTE_ANGLE_2_FACT[0]) /* z_table: Description: vector with tab
   le values */
};

/******************************************************************************\
   SLGlobal: Default storage class for global variables | Width: 16
\******************************************************************************/
sint16 Sa1_Ax__m_s_2_; /* 
   Unit: m.s-2
   LSB: 2^-9 OFF: 0 MIN/MAX: -39.228 .. 39.228 */
sint16 Sa1_Ay__m_s_2_; /* 
   Unit: m.s-2
   LSB: 2^-9 OFF: 0 MIN/MAX: -39.228 .. 39.228 */
sint16 Sa1_Az__m_s_2_; /* 
   Unit: m.s-2
   LSB: 2^-9 OFF: 0 MIN/MAX: -39.228 .. 39.228 */
sint16 s16BallPosition; /* 
   Unit: mm
   LSB: 0.0001 OFF: 0 MIN/MAX: -3.2768 .. 3.2767 */

/******************************************************************************\
   SLGlobal: Default storage class for global variables | Width: 8
\******************************************************************************/
boolean b8eCSTrigger; /* 
   Unit: mm
   LSB: 2^0 OFF: 0 MIN/MAX: 0 .. 1 */

/******************************************************************************\
   SLStaticGlobal: Default storage class for global static variables | Width: 16
\******************************************************************************/
static uint16 Sa6_Polar_radius; /* 
   Unit: m
   LSB: 2^-25 OFF: 0 MIN/MAX: 0 .. 0.00195309519767761 */
static sint16 Sa7_CrashTrigger;

/******************************************************************************\
   SLStaticGlobal: Default storage class for global static variables | Width: 8
\******************************************************************************/
static boolean Sa2_Relational_Operator;
static boolean Sa2_mergedTrigger;
static boolean Sa3_Relay; /* 
   Unit: m
   LSB: 2^0 OFF: 0 MIN/MAX: 0 .. 1 */

/******************************************************************************\
   SLStaticGlobalInit: Default storage class for global static variables with initial value | Width:
    8
\******************************************************************************/
static boolean Sa5_Switch2 = 0;

/*----------------------------------------------------------------------------*\
  PARAMETERIZED MACROS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  FUNCTION PROTOTYPES
\*----------------------------------------------------------------------------*/

/******************************************************************************\
   StaticFcnSpecStep: Default function class for static model step functions
\******************************************************************************/
static void ComputeBallPosition(void);

static void CrashDetectionMtrPerSecSqd(void);

static void eCS_LatchTrigger(void);

/*----------------------------------------------------------------------------*\
  INLINE FUNCTIONS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  FUNCTION DEFINITIONS
\*----------------------------------------------------------------------------*/

/**************************************************************************************************\
 ***  FUNCTION:
 ***      eCS_Targetlink
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
void eCS_Targetlink(void)
{
   /* Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Relational Operator */
   Sa2_Relational_Operator = Sa1_Az__m_s_2_ >= KS16_AZ_LOCK_THRS;

   /* call of function: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo */
   ComputeBallPosition();

   /* call of function: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration */
   CrashDetectionMtrPerSecSqd();

   /* Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/mergedTrigger */
   Sa2_mergedTrigger = Sa3_Relay || Sa7_CrashTrigger;

   /* call of function: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output */
   eCS_LatchTrigger();

   /* TargetLink outport: eCS_Targetlink/b8eCSTrigg */
   b8eCSTrigger = Sa5_Switch2;

   /* TargetLink outport: eCS_Targetlink/sBall
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/mToMm */
   s16BallPosition = (sint16) ((((uint32) (uint16) ((((uint32) Sa6_Polar_radius) * MToMM) >> 10)) *
    625) >> 11);
}

/*----------------------------------------------------------------------------*\
  MODULE LOCAL FUNCTION DEFINITIONS
\*----------------------------------------------------------------------------*/

/**************************************************************************************************\
 ***  FUNCTION:
 ***      ComputeBallPosition
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
static void ComputeBallPosition(void)
{
   /* SLLocal: Default storage class for local variables | Width: 32 */
   uint32 Sa6_Sum; /* 
      Unit: m
      LSB: 2^-50 OFF: 0 MIN/MAX: 0 .. 3.81469726473682e-06 */

   /* SLLocal: Default storage class for local variables | Width: 16 */
   sint16 DD_Sa3_IntegSx; /* 
      Unit: m
      LSB: 2^-24 OFF: 0 MIN/MAX: -0.001953125 .. 0.00195306539535522 */
   sint16 DD_Sa3_IntegSy; /* 
      Unit: m
      LSB: 2^-24 OFF: 0 MIN/MAX: -0.001953125 .. 0.00195306539535522 */
   sint16 Sa3_IntegVx; /* 
      Unit: m.s-1
      LSB: 2^-16 OFF: 0 MIN/MAX: -0.5 .. 0.499984741210938 */
   sint16 Sa3_IntegVy; /* 
      Unit: m.s-1
      LSB: 2^-16 OFF: 0 MIN/MAX: -0.5 .. 0.499984741210938 */
   sint16 Sa3_g_to_m_s_; /* 
      Unit: m.s-2
      LSB: 2^-9 OFF: 0 MIN/MAX: -64 .. 63.998046875 */
   sint16 Sa6_Polar_Theta; /* 
      Unit: rad
      LSB: 2^-13 OFF: 0 MIN/MAX: -4 .. 3.9998779296875 */
   uint16 Sa6_Sqrt; /* 
      Unit: m
      LSB: 2^-25 OFF: 0 MIN/MAX: 0 .. 0.00195309519767761 */

   /* SLLocal: Default storage class for local variables | Width: 32 */
   sint32 Aux_S32;
   sint32 Aux_S32_a;

   /* SLLocal: Default storage class for local variables | Width: 16 */
   sint16 Aux_S16;
   sint16 Aux_S16_a;
   sint16 Aux_S16_b;
   uint16 Aux_U16;

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 32
    */
   static sint32 X_Sa3_IntegSx = 0; /* LSB: 7.62939453125e-09 OFF: 0 MIN/MAX: -0.00125 .. 0.00124999
   237060547 */
   static sint32 X_Sa3_IntegSy = 0; /* LSB: 7.62939453125e-09 OFF: 0 MIN/MAX: -0.00125 .. 0.00124999
   237060547 */
   static sint32 X_Sa3_IntegVx = 0; /* LSB: 7.62939453125e-09 OFF: 0 MIN/MAX: -0.5 .. 0.499984741210
   938 */
   static sint32 X_Sa3_IntegVy = 0; /* LSB: 7.62939453125e-09 OFF: 0 MIN/MAX: -0.5 .. 0.499984741210
   938 */

   /* Discrete Integrator: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/IntegSx */
   DD_Sa3_IntegSx = (sint16) (((sint32) (X_Sa3_IntegSx << 4)) / ((sint32) 125));

   /* Discrete Integrator: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/IntegSy */
   DD_Sa3_IntegSy = (sint16) (((sint32) (X_Sa3_IntegSy << 4)) / ((sint32) 125));

   /* Trig: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/Polar_Theta */
   Aux_S32 = ((sint32) DD_Sa3_IntegSx) * ((sint32) DD_Sa3_IntegSx);
   Sa6_Polar_Theta = F__I16ATAN2I16(DD_Sa3_IntegSy, Aux_S32, DD_Sa3_IntegSx);

   /* Trig: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/yFactor */
   Aux_S16 = (sint16) ((((sint32) Sa6_Polar_Theta) * 33215) / ((sint32) 26087));

   /* Trig: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/xFactor */
   Aux_S16_a = (sint16) ((((sint32) Sa6_Polar_Theta) * 33215) / ((sint32) 26087));

   /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/Sum
      # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/sBall_X
      ²
      # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/sBall_Y
      ² */
   Sa6_Sum = ((uint32) (((uint32) ((((uint32) DD_Sa3_IntegSx) * ((uint32) DD_Sa3_IntegSx)) << 3)) >>
     1)) + ((uint32) (((uint32) ((((uint32) DD_Sa3_IntegSy) * ((uint32) DD_Sa3_IntegSy)) << 3)) >>
    1));

   /* Sqrt: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/Sqrt */
   if (Sa6_Sum <= 0) {
      Sa6_Sqrt = 0;
   }
   else {
      C__U16SQRTU32(Sa6_Sum, Sa6_Sqrt);
   }

   /* Saturation: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/Polar_radius
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Cartesian To Polar/Polar_radius: Omitted lower s
      aturation */
   Aux_U16 = (uint16) (BALL_POS_MAX << 1);
   Sa6_Polar_radius = C__U16SATU16_SATu(Sa6_Sqrt, Aux_U16);

   /* Relay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Relay */
   if (Sa6_Polar_radius >= ECS_TRIGGER_ON) {
      Sa3_Relay = 1;
   }
   else {
      if (Sa6_Polar_radius <= ECS_TRIGGER_OFF) {
         Sa3_Relay = 0;
      }
   }

   /* Trig: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Sin
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/grad in rad1
      # combined # Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Angle
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/CalotteAngle2
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/CalotteAngle1
      # combined # TableLookup: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Lut_Angle_1
      # combined # TableLookup: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Lut_Angle_2 */
   Aux_S16_b = (sint16) ((((sint32) (sint16) ((((sint32) (sint16) (((sint16) ((((sint32)
    Tab1DS0I2T521_a(&CalotteAngle1_LUT, (uint16) (Sa6_Polar_radius >> 1))) * ((sint32)
    S16_CALOTTE_ANGLE_1)) >> 14)) + ((sint16) ((((sint32) (sint16)
    Tab1DS0I2T521_a(&CalotteAngle2_LUT, (uint16) (Sa6_Polar_radius >> 1))) * ((sint32)
    S16_CALOTTE_ANGLE_2)) >> 14)))) * 18301) >> 16)) * 165849) / 260515);

   /* Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/g to m.s² */
   Sa3_g_to_m_s_ = (sint16) ((((sint32) F__I16SINI16(Aux_S16_b)) * 40169) >> 17);

   /* Discrete Integrator: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/IntegVx */
   Sa3_IntegVx = (sint16) (X_Sa3_IntegVx / ((sint32) 2000));

   /* Discrete Integrator: integration */
   X_Sa3_IntegSx = X_Sa3_IntegSx + ((sint32) Sa3_IntegVx);

   /* Discrete Integrator: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/IntegVy */
   Sa3_IntegVy = (sint16) (X_Sa3_IntegVy / ((sint32) 2000));

   /* Discrete Integrator: integration */
   X_Sa3_IntegSy = X_Sa3_IntegSy + ((sint32) Sa3_IntegVy);

   /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Add */
   Aux_S32 = (sint32) Sa1_Ax__m_s_2_;

   /* # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Product */
   Aux_S32 -= ((sint32) (sint16) ((((sint32) F__I16COSI16(Aux_S16_a)) * ((sint32) Sa3_g_to_m_s_)) >>
     14));

   /* Discrete Integrator: integration
      # combined # Saturation: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat: Omitted upper saturation
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat: Omitted lower saturation
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/ball damper */
   X_Sa3_IntegVx += (((sint32) (Aux_S32 << 7)) - (((sint32) Sa3_IntegVx) * BALL_DAMPER_COEFF));

   /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Add */
   Aux_S32 = (sint32) Sa1_Ay__m_s_2_;

   /* # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/Product1 */
   Aux_S32 -= ((sint32) (sint16) ((((sint32) Sa3_g_to_m_s_) * ((sint32) F__I16SINI16(Aux_S16))) >>
    14));

   /* Discrete Integrator: integration
      # combined # Saturation: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat: Omitted upper saturation
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/BallDamperSat: Omitted lower saturation
      # combined # Gain: eCS_Targetlink/eCS_Algo_in_m_per_s-2/BallAlgo/ball damper */
   X_Sa3_IntegVy += (((sint32) (Aux_S32 << 7)) - (((sint32) Sa3_IntegVy) * BALL_DAMPER_COEFF));

   /* Discrete Integrator: saturation */
   Aux_S32 = (sint32) ((((uint32) BALL_POS_MAX) * 125) >> 4);
   Aux_S32_a = (sint32) ((((sint32) BALL_POS_MIN) * 125) >> 4);
   X_Sa3_IntegSx = C__I32SATI32_SATb(X_Sa3_IntegSx, Aux_S32, Aux_S32_a);

   /* Discrete Integrator: saturation */
   Aux_S32 = (sint32) ((((uint32) BALL_POS_MAX) * 125) >> 4);
   Aux_S32_a = (sint32) ((((sint32) BALL_POS_MIN) * 125) >> 4);
   X_Sa3_IntegSy = C__I32SATI32_SATb(X_Sa3_IntegSy, Aux_S32, Aux_S32_a);
}

/**************************************************************************************************\
 ***  FUNCTION:
 ***      CrashDetectionMtrPerSecSqd
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
static void CrashDetectionMtrPerSecSqd(void)
{
   /* SLLocal: Default storage class for local variables | Width: 32 */
   uint32 Sa4_Sum; /* LSB: 2^-18 OFF: 0 MIN/MAX: 0 .. 16383.9999961853 */

   /* SLLocal: Default storage class for local variables | Width: 16 */
   uint16 Sa4_Ax_Ay_Norm; /* 
      Unit: m.s-2
      LSB: 2^-9 OFF: 0 MIN/MAX: 0 .. 127.998046875 */

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 16
    */
   static uint16 X_Sa7_u8OldTimer = 0;

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 8
    */
   static uint8 X_Sa7_Unit_Delay = 0;
   static boolean X_Sa7_u8OldTrigger = 0;

   /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Sum
      # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Ay²
      # combined # Product: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Ax² */
   Sa4_Sum = (((uint32) Sa1_Ax__m_s_2_) * ((uint32) Sa1_Ax__m_s_2_)) + (((uint32) Sa1_Ay__m_s_2_) *
    ((uint32) Sa1_Ay__m_s_2_));

   /* Sqrt: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Ax²Ay²Norm */
   if (Sa4_Sum <= 0) {
      Sa4_Ax_Ay_Norm = 0;
   }
   else {
      C__U16SQRTU32(Sa4_Sum, Sa4_Ax_Ay_Norm);
   }

   /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/AccelThr
      eshold */
   if (Sa4_Ax_Ay_Norm >= CRASH_ACCEL_TRHD_M_PER_S_S) {
      /* SLLocal: Default storage class for local variables | Width: 8 */
      uint8 Sa7_SampleCntr;

      /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/SampleCn
         tr */
      Sa7_SampleCntr = (uint8) (X_Sa7_Unit_Delay + 1);

      /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/Accel
         Threshold
         # combined # Saturation: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/Saturation
         eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/Saturation: O
         mitted lower saturation
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/Unit Delay */
      X_Sa7_Unit_Delay = C__U8SATU8_SATu(Sa7_SampleCntr, 3);
   }
   else {
      /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/Accel
         Threshold
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/Unit Delay */
      X_Sa7_Unit_Delay = 0;
   }

   /* # combined # Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Cli
      pping/EnoughSamples
      # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
      Clipping/Relational Operator1
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/Relational Opera
      tor1: Omitted comparison with constant.
      # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
      Clipping/Relational Operator
      # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
      Clipping/Unit Delay */
   if ((X_Sa7_Unit_Delay >= CRASH_SAMPLES_NB) && (!(X_Sa7_u8OldTrigger))) {
      /* Reference of merge block: Merge eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acc
         eleration Clipping/Merge
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Accelerati
         on/Acceleration Clipping/Reset timer/HoldingTime1
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/u8OldTrigger */
      X_Sa7_u8OldTrigger = 1;

      /* Reference of merge block: Merge1 eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Ac
         celeration Clipping/Merge1
         update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Accelerati
         on/Acceleration Clipping/Reset timer/HoldingTime
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/u8OldTimer */
      X_Sa7_u8OldTimer = CRASH_HOLDING_TMR;
   }
   else {
      /* # combined # Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
         Clipping/If Action Subsystem/Logical Operator1
         # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/If Action Subsystem/Relational Operator4
         # combined # Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
         Clipping/If Action Subsystem/Logical Operator
         # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/If Action Subsystem/Relational Operator3
         eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/If Action Sub
         system/Relational Operator3: Omitted comparison with constant.
         # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/If Action Subsystem/Relational Operator2
         # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Accelerati
         on Clipping/Unit Delay */
      if ((X_Sa7_Unit_Delay < CRASH_SAMPLES_NB) && X_Sa7_u8OldTrigger && (X_Sa7_u8OldTimer == 0)) {
         /* Reference of merge block: Merge eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/
            Acceleration Clipping/Merge
            update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceler
            ation/Acceleration Clipping/If Action
            Subsystem/Clear Trigger /Constant1
            # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceler
            ation Clipping/u8OldTrigger */
         X_Sa7_u8OldTrigger = 0;
      }
      else {
         /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/If
             Action Subsystem/Decrease Timer/HoldingTimer */
         if (X_Sa7_u8OldTimer != 0) {
            /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping
               /If Action Subsystem/Decrease Timer/HoldingTimer
               # combined # Reference of merge block: Merge1 eCS_Targetlink/eCS_Algo_in_m_per_s-2/Cr
               ash Acceleration/Acceleration Clipping/Merge1
               update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acce
               leration/Acceleration Clipping/If Action
               Subsystem/Decrease Timer/HoldingTimer
               # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acce
               leration Clipping/u8OldTimer
               # combined # Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleratio
               n Clipping/If Action Subsystem/Decrease Timer/Sum */
            X_Sa7_u8OldTimer = (uint16) (X_Sa7_u8OldTimer - 1);
         }
         else {
            /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping
               /If Action Subsystem/Decrease Timer/HoldingTimer
               # combined # Reference of merge block: Merge1 eCS_Targetlink/eCS_Algo_in_m_per_s-2/Cr
               ash Acceleration/Acceleration Clipping/Merge1
               update of variable(s) associated with eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acce
               leration/Acceleration Clipping/If Action
               Subsystem/Decrease Timer/HoldingTimer
               # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acce
               leration Clipping/u8OldTimer */
            X_Sa7_u8OldTimer = 0;
         }
      }
   }

   /* eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration Clipping/CrashTrigger
      # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/Crash Acceleration/Acceleration 
      Clipping/u8OldTrigger */
   Sa7_CrashTrigger = (sint16) X_Sa7_u8OldTrigger;
}

/**************************************************************************************************\
 ***  FUNCTION:
 ***      eCS_LatchTrigger
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
static void eCS_LatchTrigger(void)
{
   /* SLLocal: Default storage class for local variables | Width: 16 */
   uint16 Sa5_Sum;
   uint16 Sa5_Switch;
   uint16 Sa5_u16HoldingCntr;

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 16
    */
   static sint16 X_Sa5_b8OldeCSTrigger = 0;
   static uint16 X_Sa5_prev_HoldingCntr = 0;
   static uint16 X_Sa5_u16_z_UnlockThrs = 0;

   /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch: Omitted comparison with constant
      .
      # combined # Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Logical Operator1
      # combined # Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Logical Operator
      # combined # Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch2
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch2: Omitted comparison with constan
      t.
      # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Unit Delay */
   if ((Sa5_Switch2 && Sa2_Relational_Operator) || Sa2_mergedTrigger) {
      /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch */
      Sa5_Switch = 0;
   }
   else {
      /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch */
      Sa5_Switch = X_Sa5_prev_HoldingCntr;
   }

   /* Sum: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Sum */
   Sa5_Sum = (uint16) (Sa5_Switch + 1);

   /* Saturation: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/u16HoldingCntr
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/u16HoldingCntr: Omitted lower saturation
    */
   Sa5_u16HoldingCntr = C__U16SATU16_SATu(Sa5_Sum, 4000);

   /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/u16UnlockThrs
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/u16UnlockThrs: Omitted comparison with c
      onstant.
      # combined # Logical: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Logical Operator2
      # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Relational Oper
      ator3
      # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Relational Oper
      ator4
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Relational Operator4: Omitted comparison
       with constant. */
   if (Sa2_mergedTrigger && (0 == X_Sa5_b8OldeCSTrigger)) {
      /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch3
         eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch3: Omitted comparison with cons
         tant.
         # combined # Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/IsLongLock
       */
      if (X_Sa5_prev_HoldingCntr < ECS_DELAY_BETWEEN_UNLOCK) {
         /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch3
            # combined # Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/u16UnlockThrs
            # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/u16_z_Unl
            ockThrs */
         X_Sa5_u16_z_UnlockThrs = ECS_HOLDING_TRIGGER_LONG;
      }
      else {
         /* Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch3
            # combined # Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/u16UnlockThrs
            # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/u16_z_Unl
            ockThrs */
         X_Sa5_u16_z_UnlockThrs = ECS_HOLDING_TRIGGER;
      }
   }

   /* Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/b8OldeCSTrigger */
   X_Sa5_b8OldeCSTrigger = (sint16) Sa2_mergedTrigger;

   /* Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/prev_HoldingCntr */
   X_Sa5_prev_HoldingCntr = Sa5_u16HoldingCntr;

   /* Relational: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Relational Operator2
      # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Unit Delay
      # combined # Switch: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch2
      eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Switch2: Omitted comparison with constan
      t.
      # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/Unit Delay
      # combined # Unit delay: eCS_Targetlink/eCS_Algo_in_m_per_s-2/eCS Latch Output/u16_z_UnlockThr
      s */
   Sa5_Switch2 = Sa5_u16HoldingCntr < X_Sa5_u16_z_UnlockThrs;
}

#endif /* ECS_TARGETLINK_C */
/*----------------------------------------------------------------------------*\
  END OF FILE
\*----------------------------------------------------------------------------*/
