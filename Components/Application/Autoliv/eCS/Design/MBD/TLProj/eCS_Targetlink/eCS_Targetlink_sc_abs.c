/**************************************************************************************************\
 *** 
 *** Simulink model       : eCS_Algo_Simulation_2015b
 *** TargetLink subsystem : eCS_Algo_Simulation_2015b/eCS_Targetlink
 *** Codefile             : eCS_Targetlink.c
 ***
 *** Generated by TargetLink, the dSPACE production quality code generator
 *** Generation date: 2020-06-08 15:18:11
 ***
 *** CODE GENERATOR OPTIONS:
 *** Code generation mode                     : Standard
 *** Compiler                                 : <unknown>
 *** Target                                   : Generic
 *** ANSI-C compatible code                   : yes
 *** Code Optimization                        : enabled
 *** Constant style                           : decimal
 *** Clean code option                        : disabled
 *** Logging mode                             : According to block-specific data
 *** Code Coverage                            : disabled
 *** Generate empty conditional branches      : disabled
 *** Loop unroll threshold                    : 5
 *** Shift mode                               : automatic
 *** Handle unscaled SF expr. with TL type    : enabled
 *** Assignment of conditions                 : AllBooleanOutputs 
 *** Scope reduction only to function level   : disabled
 *** Exploit ranges if not erasable           : disabled
 *** Exploit Compute Through Overflow         : optimized
 *** Linker sections                          : enabled
 *** Enable Assembler                         : disabled
 *** Variable name length                     : 31 chars
 *** Use global bitfields                     : disabled
 *** Stateflow: use of bitfields              : enabled
 *** State activity encoding limit            : 5
 *** Omit zero inits in restart function      : disabled
 *** Share functions between TL subsystems    : disabled
 *** Generate 64bit functions                 : enabled
 *** Inlining Threshold                       : 6
 *** Line break limit                         : 100
 *** Target optimized boolean data type       : enabled
 *** Keep saturation elements                 : disabled
 *** Extended variable sharing                : disabled
 *** Extended lifetime optimization           : enabled
 *** Style definition file                    : C:\Program Files\dSPACE TargetLink 4.2\Matlab\Tl\Con
 ***                                            fig\codegen\cconfig.xml
 *** Root style sheet                         : C:\Program Files\dSPACE TargetLink 4.2\Matlab\Tl\XML
 ***                                            \CodeGen\Stylesheets\TL_CSourceCodeSS.xsl
 ***
 *** SUBSYS                   CORRESPONDING SIMULINK SUBSYSTEM
 *** Sa1                      eCS_Targetlink
 *** Sa2                      eCS_Targetlink/Ax dual integrator
 *** Sa3                      eCS_Targetlink/Ay dual integrator
 *** Sa4                      eCS_Targetlink/Crash Acceleration
 *** Sa5                      eCS_Targetlink/Vector Norm
 *** Sa6                      eCS_Targetlink/eCS Trigger Hold Time
 *** Sa7                      eCS_Targetlink/Crash Acceleration/Acceleration Clipping
 *** Sa8                      eCS_Targetlink/Crash Acceleration/Acceleration Clipping/If ActionSubsy
 ***                          stem
 *** Sa9                      eCS_Targetlink/Crash Acceleration/Acceleration Clipping/Reset timer
 *** Sa10                     eCS_Targetlink/Crash Acceleration/Acceleration Clipping/If ActionSubsy
 ***                          stem/Clear Trigger 
 *** Sa11                     eCS_Targetlink/Crash Acceleration/Acceleration Clipping/If ActionSubsy
 ***                          stem/Decrease Timer
 *** Sa12                     eCS_Targetlink/eCS Trigger Hold Time/CheckTimer value
 *** Sa13                     eCS_Targetlink/eCS Trigger Hold Time/CheckTimer value1
 *** Sa14                     eCS_Targetlink/eCS Trigger Hold Time/If ActionSubsystem
 *** Sa15                     eCS_Targetlink/eCS Trigger Hold Time/If ActionSubsystem1
 *** 
 *** SUBSYS                   CORRESPONDING MODEL BLOCK (REFERENCED MODEL)
 *** 
 *** SF-NODE   CORRESPONDING STATEFLOW NODE                           DESCRIPTION
 *** 
 *** TargetLink version      : 4.2 from 14-Oct-2016
 *** Code generator version  : Build Id 4.2.0.26 from 2016-10-17 16:31:48

\**************************************************************************************************/

#ifndef ECS_TARGETLINK_C
#define ECS_TARGETLINK_C

/*----------------------------------------------------------------------------*\
  DEFINES (OPT)
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  INCLUDES
\*----------------------------------------------------------------------------*/

#include "eCS_Targetlink_lut.h"
#include "eCS_Targetlink.h"
#include "dsfxp.h"

/*----------------------------------------------------------------------------*\
  ENUMS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  DEFINES
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  TYPEDEFS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  VARIABLES
\*----------------------------------------------------------------------------*/

/******************************************************************************\
   MERGEABLE_CONST: mergeable constants (ROM) | Width: 16
\******************************************************************************/
MERGEABLE_CONST sint16 AS32LUT_CALLOTE_ANGLE_1_FACT[4] = 
{
   /* [0..3] */ -10000, -10000, 10000, 10000
   /* -1., -1., 1., 1. */
}; /* LSB: 0.0001 OFF: 0, different constrained ranges */
MERGEABLE_CONST sint16 AS8LUT_CALLOTE_ANGLE_1_IDX[4] = 
{
   /* [0..3] */ -20000, -200, 200, 20000
   /* -0.0002, -2e-06, 2e-06, 0.0002 */
}; /* LSB: 1e-08 OFF: 0, different constrained ranges */
MERGEABLE_CONST sint16 LUT_CALLOTE_ANGLE_2_FACT[6] = 
{
   /* [0..5] */ -10000, -10000, 0, 0, 10000, 10000
   /* -1., -1., 0., 0., 1., 1. */
}; /* LSB: 0.0001 OFF: 0, different constrained ranges */
MERGEABLE_CONST sint16 LUT_CALLOTE_ANGLE_2_IDX[6] = 
{
   /* [0..5] */ -10000, -5000, -4000, 4000, 5000, 10000
   /* -0.0001, -5e-05, -4e-05, 4e-05, 5e-05, 0.0001 */
}; /* LSB: 1e-08 OFF: 0, different constrained ranges */

/******************************************************************************\
   SLGlobal: Default storage class for global variables | Width: 16
\******************************************************************************/
uint16 Sa1_s_ball; /* 
   Unit: mm
   LSB: 0.0001 OFF: 0 MIN/MAX: 0 .. 6.5535 */
sint16 s16AxRaw; /* LSB: 2^-14 OFF: 0 MIN/MAX: -2 .. 1.99993896484375 */
sint16 s16AyRaw; /* LSB: 2^-14 OFF: 0 MIN/MAX: -2 .. 1.99993896484375 */

/******************************************************************************\
   SLGlobal: Default storage class for global variables | Width: 8
\******************************************************************************/
boolean Sa1_b8eCSTrigger;

/******************************************************************************\
   SLStaticGlobal: Default storage class for global static variables | Width: 16
\******************************************************************************/
static sint16 Sa2_IntegSx; /* 
   Unit: g.s²
   LSB: 1e-08 OFF: 0 MIN/MAX: -0.00032768 .. 0.00032767 */
static sint16 Sa3_IntegSy; /* 
   Unit: g.s²
   LSB: 1e-08 OFF: 0 MIN/MAX: -0.00032768 .. 0.00032767 */

/******************************************************************************\
   SLStaticGlobalInit: Default storage class for global static variables with initial value | Width:
    16
\******************************************************************************/
static sint16 Sa7_CrashTrigger = 0;

/*----------------------------------------------------------------------------*\
  PARAMETERIZED MACROS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  FUNCTION PROTOTYPES
\*----------------------------------------------------------------------------*/

/******************************************************************************\
   StaticFcnSpecStep: Default function class for static model step functions
\******************************************************************************/
static void ComputeSx(void);

static void ComputeSy(void);

static void Sa4_Crash_Acceleration(void);

/*----------------------------------------------------------------------------*\
  INLINE FUNCTIONS
\*----------------------------------------------------------------------------*/
/*----------------------------------------------------------------------------*\
  FUNCTION DEFINITIONS
\*----------------------------------------------------------------------------*/

/**************************************************************************************************\
 ***  FUNCTION:
 ***      eCS_Targetlink
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
void eCS_Targetlink(void)
{
   /* SLLocal: Default storage class for local variables | Width: 32 */
   uint32 Sa5_SumSxSy; /* 
      Unit: g.s-2
      LSB: 1e-14 OFF: 0 MIN/MAX: 0 .. 4.294967295e-05 */
   uint32 Sa5_Sx_Sy_Norm; /* 
      Unit: g.s²
      LSB: 1e-08 OFF: 0 MIN/MAX: 0 .. 42.94967295 */
   uint32 Sa5_sx_; /* 
      Unit: g.s-2
      LSB: 1e-14 OFF: 0 MIN/MAX: 0 .. 4.294967295e-05 */
   uint32 Sa5_sy_; /* 
      Unit: g.s-2
      LSB: 1e-14 OFF: 0 MIN/MAX: 0 .. 4.294967295e-05 */

   /* SLLocal: Default storage class for local variables | Width: 8 */
   boolean Sa1_mergedTrigger;
   boolean Sa6_TmrStarted;
   boolean Sa6_TriggFiltered;

   /* SLLocalInit: Default storage class for local variables with init value | Width: 16 */
   uint16 Sa6_Merge1;

   /* SLStaticLocal: Default storage class for static local variables | Width: 8 */
   static boolean Sa5_Trigger; /* 
      Unit: g.s-2
      LSB: 2^0 OFF: 0 MIN/MAX: 0 .. 1 */

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 16
    */
   static uint16 Sa12_RollingCntr = 0;
   static uint16 X_Sa6_Unit_Delay = 0;

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 8
    */
   static uint8 X_Sa6_Unit_Delay2 = 0;
   static boolean X_Sa6_isStarted = 0;

   LOG_VAR(a, _s16AxRaw, s16AxRaw);

   /* call of function: eCS_Targetlink/Ax dual integrator */
   ComputeSx();
   LOG_VAR(a, _s16AyRaw, s16AyRaw);

   /* call of function: eCS_Targetlink/Ay dual integrator */
   ComputeSy();

   /* Product: eCS_Targetlink/Vector Norm/sx² */
   Sa5_sx_ = (uint32) ((((sint32) Sa2_IntegSx) * ((sint32) Sa2_IntegSx)) / ((sint32) 100));
   LOG_VAR(a, _Sa5_sx_, Sa5_sx_);

   /* Product: eCS_Targetlink/Vector Norm/sy² */
   Sa5_sy_ = (uint32) ((((sint32) Sa3_IntegSy) * ((sint32) Sa3_IntegSy)) / ((sint32) 100));
   LOG_VAR(a, _Sa5_sy_, Sa5_sy_);

   /* Sum: eCS_Targetlink/Vector Norm/SumSxSy */
   Sa5_SumSxSy = Sa5_sx_ + Sa5_sy_;
   LOG_VAR(a, _Sa5_SumSxSy, Sa5_SumSxSy);

   /* Sqrt: eCS_Targetlink/Vector Norm/Sx²Sy²Norm */
   if (Sa5_SumSxSy <= 0) {
      Sa5_Sx_Sy_Norm = 0;
   }
   else {
      /* SLLocal: Default storage class for local variables | Width: 32 */
      uint32 Aux_U32;

      C__U16SQRTU32(Sa5_SumSxSy, Aux_U32);
      Sa5_Sx_Sy_Norm = Aux_U32 * 10;
   }
   LOG_VAR(a, _Sa5_Sx_Sy_Norm, Sa5_Sx_Sy_Norm);

   /* Relay: eCS_Targetlink/Vector Norm/Trigger */
   if (Sa5_Sx_Sy_Norm >= 4000 /* 4e-05 */) {
      Sa5_Trigger = 1;
   }
   else {
      if (Sa5_Sx_Sy_Norm <= 1000 /* 1e-05 */) {
         Sa5_Trigger = 0;
      }
   }
   LOG_VAR(a, _Sa5_Trigger, Sa5_Trigger);

   /* TargetLink outport: eCS_Targetlink/s_ball
      # combined # Gain: eCS_Targetlink/Gain */
   Sa1_s_ball = (uint16) ((Sa5_Sx_Sy_Norm * 4017) >> 12);
   LOG_VAR(a, _Sa1_s_ball, Sa1_s_ball);

   /* call of function: eCS_Targetlink/Crash Acceleration */
   Sa4_Crash_Acceleration();

   /* Logical: eCS_Targetlink/mergedTrigger */
   Sa1_mergedTrigger = Sa5_Trigger || (Sa7_CrashTrigger != 0);
   LOG_VAR(a, _Sa1_mergedTrigger, Sa1_mergedTrigger);

   /* # combined # Logical: eCS_Targetlink/eCS Trigger Hold Time/Logical Operator
      # combined # Relational: eCS_Targetlink/eCS Trigger Hold Time/Relational Operator
      # combined # Relational: eCS_Targetlink/eCS Trigger Hold Time/Relational Operator1
      eCS_Targetlink/eCS Trigger Hold Time/Relational Operator1: Omitted comparison with constant.
    */
   if ((!(Sa1_mergedTrigger)) && (X_Sa6_Unit_Delay2 == 1)) {
      /* Reference of merge block: Merge1 eCS_Targetlink/eCS Trigger Hold Time/Merge1
         update of variable(s) associated with eCS_Targetlink/eCS Trigger Hold Time/If Action
         Subsystem/Constant1 */
      Sa6_Merge1 = 0;

      /* Reference of merge block: Merge eCS_Targetlink/eCS Trigger Hold Time/Merge
         update of variable(s) associated with eCS_Targetlink/eCS Trigger Hold Time/If Action
         Subsystem/Constant
         # combined # eCS_Targetlink/eCS Trigger Hold Time/TmrStarted */
      Sa6_TmrStarted = 1;
   }
   else {
      /* Reference of merge block: Merge1 eCS_Targetlink/eCS Trigger Hold Time/Merge1
         update of variable(s) associated with eCS_Targetlink/eCS Trigger Hold Time/If Action
         Subsystem1/oldTmr */
      Sa6_Merge1 = X_Sa6_Unit_Delay;

      /* Reference of merge block: Merge eCS_Targetlink/eCS Trigger Hold Time/Merge
         update of variable(s) associated with eCS_Targetlink/eCS Trigger Hold Time/If Action
         Subsystem1/b8OldIsTmrStarted
         # combined # eCS_Targetlink/eCS Trigger Hold Time/TmrStarted */
      Sa6_TmrStarted = X_Sa6_isStarted;
   }

   /* Unit delay: eCS_Targetlink/eCS Trigger Hold Time/Unit Delay2 */
   X_Sa6_Unit_Delay2 = (uint8) Sa1_mergedTrigger;
   LOG_VAR(a, _Sa6_TmrStarted, Sa6_TmrStarted);
   if (Sa6_TmrStarted) {
      /* Sum: eCS_Targetlink/eCS Trigger Hold Time/CheckTimer value/RollingCntr */
      Sa12_RollingCntr = (uint16) (Sa6_Merge1 + 1);
      LOG_VAR(a, _Sa12_RollingCntr, Sa12_RollingCntr);

      /* Reference of merge block: Merge3 eCS_Targetlink/eCS Trigger Hold Time/Merge3
         update of variable(s) associated with eCS_Targetlink/eCS Trigger Hold Time/CheckTimer value
         /Rescaler
         # combined # eCS_Targetlink/eCS Trigger Hold Time/TriggFiltered
         # combined # eCS_Targetlink/eCS Trigger Hold Time/CheckTimer value/Rescaler */
      Sa6_TriggFiltered = 1;

      /* Switch: eCS_Targetlink/eCS Trigger Hold Time/CheckTimer value/Switch */
      X_Sa6_isStarted = Sa12_RollingCntr < 500;
   }
   else {
      /* Reference of merge block: Merge3 eCS_Targetlink/eCS Trigger Hold Time/Merge3
         update of variable(s) associated with eCS_Targetlink/eCS Trigger Hold Time/CheckTimer value
         1/b8Trigger
         # combined # eCS_Targetlink/eCS Trigger Hold Time/TriggFiltered */
      Sa6_TriggFiltered = Sa1_mergedTrigger;

      /* Reference of merge block: Merge2 eCS_Targetlink/eCS Trigger Hold Time/Merge2
         update of variable(s) associated with eCS_Targetlink/eCS Trigger Hold Time/CheckTimer value
         1/Constant1
         # combined # Unit delay: eCS_Targetlink/eCS Trigger Hold Time/isStarted */
      X_Sa6_isStarted = 0;
   }

   /* Unit delay: eCS_Targetlink/eCS Trigger Hold Time/Unit Delay */
   X_Sa6_Unit_Delay = Sa12_RollingCntr;
   LOG_VAR(a, _Sa6_TriggFiltered, Sa6_TriggFiltered);

   /* TargetLink outport: eCS_Targetlink/b8eCSTrigger */
   Sa1_b8eCSTrigger = Sa6_TriggFiltered;
}

/*----------------------------------------------------------------------------*\
  MODULE LOCAL FUNCTION DEFINITIONS
\*----------------------------------------------------------------------------*/

/**************************************************************************************************\
 ***  FUNCTION:
 ***      ComputeSx
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
static void ComputeSx(void)
{
   /* SLLocal: Default storage class for local variables | Width: 32 */
   sint32 Sa2_AddAx; /* 
      Unit: mg.s-2
      LSB: 1e-06 OFF: 0 MIN/MAX: -2147.483648 .. 2147.483647 */

   /* SLLocal: Default storage class for local variables | Width: 16 */
   sint16 Sa2_AxCalotteAngle1; /* 
      Unit: m
      LSB: 0.001 OFF: 0 MIN/MAX: -32.768 .. 32.767 */
   sint16 Sa2_AxCalotteAngle2; /* 
      Unit: m
      LSB: 0.001 OFF: 0 MIN/MAX: -32.768 .. 32.767 */
   sint16 Sa2_BallDamperSat; /* 
      Unit: m
      LSB: 0.0002 OFF: 0 MIN/MAX: -6.5536 .. 6.5534 */
   sint16 Sa2_IntegVx; /* 
      Unit: g.s²
      LSB: 1e-07 OFF: 0 MIN/MAX: -0.0032768 .. 0.0032767 */
   sint16 Sa2_SinAx; /* 
      Unit: m
      LSB: 0.0001 OFF: 0 MIN/MAX: -3.2768 .. 3.2767 */
   sint16 Sa2_soft_sign1; /* 
      Unit: m
      LSB: 0.0001 OFF: 0 MIN/MAX: -3.2768 .. 3.2767 */
   sint16 Sa2_soft_sign2; /* 
      Unit: m
      LSB: 0.0001 OFF: 0 MIN/MAX: -3.2768 .. 3.2767 */

   /* SLLocal: Default storage class for local variables | Width: 32 */
   sint32 Aux_S32;

   /* SLLocal: Default storage class for local variables | Width: 16 */
   sint16 Aux_S16;

   /* SLStaticLocalConst: Default storage class for static local const variables | Width: N.A. */
   static const MAP_Tab1DS0I2T2084_a Sa2_soft_sign1_map = {
      4, /* Nx: Description: number of axis points */
      &(AS8LUT_CALLOTE_ANGLE_1_IDX[0]), /* x_table: Description: vector with axis values */
      &(AS32LUT_CALLOTE_ANGLE_1_FACT[0]) /* z_table: Description: vector with table values */
   };
   
   static const MAP_Tab1DS0I2T2084_a Sa2_soft_sign2_map = {
      6, /* Nx: Description: number of axis points */
      &(LUT_CALLOTE_ANGLE_2_IDX[0]), /* x_table: Description: vector with axis values */
      &(LUT_CALLOTE_ANGLE_2_FACT[0]) /* z_table: Description: vector with table values */
   };

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 32
    */
   static sint32 X_Sa2_IntegSx = 0; /* LSB: 5e-11 OFF: 0 MIN/MAX: -0.0001016384 .. 0.00010163835 */
   static sint32 X_Sa2_IntegVx = 0; /* LSB: 5e-10 OFF: 0 MIN/MAX: -0.0032768 .. 0.0032767 */

   /* Discrete Integrator: eCS_Targetlink/Ax dual integrator/IntegSx */
   Sa2_IntegSx = (sint16) (X_Sa2_IntegSx / ((sint32) 200));
   LOG_VAR(a, _Sa2_IntegSx, Sa2_IntegSx);

   /* TableLookup: eCS_Targetlink/Ax dual integrator/soft sign1 */
   Sa2_soft_sign1 = Tab1DS0I2T2084_a(&Sa2_soft_sign1_map, Sa2_IntegSx);
   LOG_VAR(a, _Sa2_soft_sign1, Sa2_soft_sign1);

   /* Gain: eCS_Targetlink/Ax dual integrator/AxCalotteAngle1 */
   Sa2_AxCalotteAngle1 = (sint16) ((((sint32) Sa2_soft_sign1) * ((sint32) s32CalotteAngle1)) / 
    10000);
   LOG_VAR(a, _Sa2_AxCalotteAngle1, Sa2_AxCalotteAngle1);

   /* TableLookup: eCS_Targetlink/Ax dual integrator/soft sign2 */
   Sa2_soft_sign2 = Tab1DS0I2T2084_a(&Sa2_soft_sign2_map, Sa2_IntegSx);
   LOG_VAR(a, _Sa2_soft_sign2, Sa2_soft_sign2);

   /* Gain: eCS_Targetlink/Ax dual integrator/AxCalotteAngle2 */
   Sa2_AxCalotteAngle2 = (sint16) (-((sint16) ((((sint32) Sa2_soft_sign2) * 19661) >> 14)));
   LOG_VAR(a, _Sa2_AxCalotteAngle2, Sa2_AxCalotteAngle2);

   /* Trig: eCS_Targetlink/Ax dual integrator/SinAx
      # combined # Gain: eCS_Targetlink/Ax dual integrator/grad in rad1
      # combined # Sum: eCS_Targetlink/Ax dual integrator/AddAngle */
   Aux_S16 = (sint16) ((((sint32) (sint16) ((((sint32) (sint16) (Sa2_AxCalotteAngle1 +
    Sa2_AxCalotteAngle2)) * 18301) >> 20)) * 283675) / ((sint32) 27197));
   Sa2_SinAx = (sint16) ((((sint32) F__I16SINI16(Aux_S16)) * 625) >> 10);
   LOG_VAR(a, _Sa2_SinAx, Sa2_SinAx);

   /* Discrete Integrator: eCS_Targetlink/Ax dual integrator/IntegVx */
   Sa2_IntegVx = (sint16) (X_Sa2_IntegVx / ((sint32) 200));

   /* Discrete Integrator: integration */
   X_Sa2_IntegSx = X_Sa2_IntegSx + ((sint32) Sa2_IntegVx);

   /* # combined # eCS_Targetlink/Ax dual integrator/IntegSx: folded operation multiplication to con
      stant value -2000000
      # combined # Discrete Integrator: saturation
      eCS_Targetlink/Ax dual integrator/IntegSx: folded operation multiplication to constant value 2
      000000 */
   X_Sa2_IntegSx = C__I32SATI32_SATb(X_Sa2_IntegSx, 2000000, -2000000);
   LOG_VAR(a, _Sa2_IntegVx, Sa2_IntegVx);

   /* Saturation: eCS_Targetlink/Ax dual integrator/BallDamperSat
      eCS_Targetlink/Ax dual integrator/BallDamperSat: Omitted upper saturation
      eCS_Targetlink/Ax dual integrator/BallDamperSat: Omitted lower saturation
      # combined # Gain: eCS_Targetlink/Ax dual integrator/ball damper */
   Sa2_BallDamperSat = (sint16) ((((sint32) Sa2_IntegVx) * 13107) >> 18);
   LOG_VAR(a, _Sa2_BallDamperSat, Sa2_BallDamperSat);

   /* Sum: eCS_Targetlink/Ax dual integrator/AddAx */
   Aux_S32 = (sint32) ((((sint32) s16AxRaw) * 15625) >> 8);
   Aux_S32 -= (((sint32) Sa2_SinAx) * 100);
   Sa2_AddAx = Aux_S32 - (((sint32) Sa2_BallDamperSat) * 200);

   /* Discrete Integrator: integration */
   X_Sa2_IntegVx += Sa2_AddAx;
   LOG_VAR(a, _Sa2_AddAx, Sa2_AddAx);
}

/**************************************************************************************************\
 ***  FUNCTION:
 ***      ComputeSy
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
static void ComputeSy(void)
{
   /* SLLocal: Default storage class for local variables | Width: 16 */
   sint16 Sa3_AuCalotteAngle2; /* 
      Unit: m
      LSB: 0.001 OFF: 0 MIN/MAX: -32.768 .. 32.767 */
   sint16 Sa3_AyCalotteAngle1; /* 
      Unit: m
      LSB: 0.001 OFF: 0 MIN/MAX: -32.768 .. 32.767 */
   sint16 Sa3_IntegVy; /* 
      Unit: g.s²
      LSB: 1e-06 OFF: 0 MIN/MAX: -0.032768 .. 0.032767 */

   /* SLLocal: Default storage class for local variables | Width: 32 */
   sint32 Aux_S32;

   /* SLLocal: Default storage class for local variables | Width: 16 */
   sint16 Aux_S16;

   /* SLStaticLocalConst: Default storage class for static local const variables | Width: N.A. */
   static const MAP_Tab1DS0I2T2084_a Sa3_soft_sign1_map = {
      4, /* Nx: Description: number of axis points */
      &(AS8LUT_CALLOTE_ANGLE_1_IDX[0]), /* x_table: Description: vector with axis values */
      &(AS32LUT_CALLOTE_ANGLE_1_FACT[0]) /* z_table: Description: vector with table values */
   };
   
   static const MAP_Tab1DS0I2T2084_a Sa3_soft_sign2_map = {
      6, /* Nx: Description: number of axis points */
      &(LUT_CALLOTE_ANGLE_2_IDX[0]), /* x_table: Description: vector with axis values */
      &(LUT_CALLOTE_ANGLE_2_FACT[0]) /* z_table: Description: vector with table values */
   };

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 32
    */
   static sint32 X_Sa3_IntegSy = 0; /* LSB: 5e-10 OFF: 0 MIN/MAX: -0.000116384 .. 0.0001163835 */
   static sint32 X_Sa3_IntegVy = 0; /* LSB: 5e-10 OFF: 0 MIN/MAX: -0.032768 .. 0.032767 */

   /* Discrete Integrator: eCS_Targetlink/Ay dual integrator/IntegSy */
   Sa3_IntegSy = (sint16) (X_Sa3_IntegSy / ((sint32) 20));
   LOG_VAR(a, _Sa3_IntegSy, Sa3_IntegSy);

   /* Gain: eCS_Targetlink/Ay dual integrator/AyCalotteAngle1
      # combined # TableLookup: eCS_Targetlink/Ay dual integrator/soft sign1 */
   Sa3_AyCalotteAngle1 = (sint16) ((((sint32) Tab1DS0I2T2084_a(&Sa3_soft_sign1_map, Sa3_IntegSy)) *
    ((sint32) s32CalotteAngle1)) / 10000);
   LOG_VAR(a, _Sa3_AyCalotteAngle1, Sa3_AyCalotteAngle1);

   /* Gain: eCS_Targetlink/Ay dual integrator/AuCalotteAngle2
      # combined # TableLookup: eCS_Targetlink/Ay dual integrator/soft sign2 */
   Sa3_AuCalotteAngle2 = (sint16) (-((sint16) ((((sint32) Tab1DS0I2T2084_a(&Sa3_soft_sign2_map,
    Sa3_IntegSy)) * 19661) >> 14)));
   LOG_VAR(a, _Sa3_AuCalotteAngle2, Sa3_AuCalotteAngle2);

   /* Trig: eCS_Targetlink/Ay dual integrator/SinAy
      # combined # Gain: eCS_Targetlink/Ay dual integrator/grad in rad1
      # combined # Sum: eCS_Targetlink/Ay dual integrator/AddAngle */
   Aux_S16 = (sint16) ((((sint32) (sint16) ((((((sint32) Sa3_AyCalotteAngle1) * 10) + (((sint32)
    Sa3_AuCalotteAngle2) * 10)) * 915) >> 19)) * 283675) / ((sint32) 27197));

   /* Discrete Integrator: eCS_Targetlink/Ay dual integrator/IntegVy */
   Sa3_IntegVy = (sint16) (X_Sa3_IntegVy / ((sint32) 2000));

   /* Discrete Integrator: integration */
   X_Sa3_IntegSy = X_Sa3_IntegSy + ((sint32) Sa3_IntegVy);

   /* # combined # eCS_Targetlink/Ay dual integrator/IntegSy: folded operation multiplication to con
      stant value -200000
      # combined # Discrete Integrator: saturation
      eCS_Targetlink/Ay dual integrator/IntegSy: folded operation multiplication to constant value 2
      00000 */
   X_Sa3_IntegSy = C__I32SATI32_SATb(X_Sa3_IntegSy, 200000, -200000);
   LOG_VAR(a, _Sa3_IntegVy, Sa3_IntegVy);

   /* Sum: eCS_Targetlink/Ay dual integrator/AddAy */
   Aux_S32 = (sint32) ((((sint32) s16AyRaw) * 15625) >> 8);
   Aux_S32 -= (((sint32) (sint16) ((((sint32) F__I16SINI16(Aux_S16)) * 625) >> 10)) * 100);

   /* Discrete Integrator: integration
      # combined # Saturation: eCS_Targetlink/Ay dual integrator/BallDamperSat
      eCS_Targetlink/Ay dual integrator/BallDamperSat: Omitted upper saturation
      eCS_Targetlink/Ay dual integrator/BallDamperSat: Omitted lower saturation
      # combined # Gain: eCS_Targetlink/Ay dual integrator/ball damper */
   X_Sa3_IntegVy += (Aux_S32 - (((sint32) (sint16) (Sa3_IntegVy >> 1)) * 200));
}

/**************************************************************************************************\
 ***  FUNCTION:
 ***      Sa4_Crash_Acceleration
 *** 
 ***  DESCRIPTION:
 ***      
 *** 
 ***  PARAMETERS:
 ***      Type               Name                Description
 ***      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ***
 ***  RETURNS:
 ***      void
 ***
 ***  SETTINGS:
 ***
\**************************************************************************************************/
static void Sa4_Crash_Acceleration(void)
{
   /* SLLocal: Default storage class for local variables | Width: 32 */
   uint32 Sa4_Ax_Ay_Norm; /* LSB: 2^-14 OFF: 0 MIN/MAX: 0 .. 262143.999938965 */
   uint32 Sa4_Sum; /* LSB: 2^-28 OFF: 0 MIN/MAX: 0 .. 15.9999999962747 */

   /* SLLocal: Default storage class for local variables | Width: 8 */
   boolean Sa7_EnoughSamples;

   /* SLStaticLocalInit: Default storage class for static local variables with initvalue | Width: 8
    */
   static uint8 X_Sa7_u8OldTimer = 0;

   /* Sum: eCS_Targetlink/Crash Acceleration/Sum
      # combined # Product: eCS_Targetlink/Crash Acceleration/Ay²
      # combined # Product: eCS_Targetlink/Crash Acceleration/Ax² */
   Sa4_Sum = (((uint32) s16AxRaw) * ((uint32) s16AxRaw)) + (((uint32) s16AyRaw) * ((uint32)
    s16AyRaw));

   /* Sqrt: eCS_Targetlink/Crash Acceleration/Ax²Ay²Norm */
   if (Sa4_Sum <= 0) {
      Sa4_Ax_Ay_Norm = 0;
   }
   else {
      C__U16SQRTU32(Sa4_Sum, Sa4_Ax_Ay_Norm);
   }
   LOG_VAR(a, _Sa4_Ax_Ay_Norm, Sa4_Ax_Ay_Norm);

   /* Logical: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/EnoughSamples */
   Sa7_EnoughSamples = 0;
   LOG_VAR(a, _Sa7_EnoughSamples, Sa7_EnoughSamples);
   if (Sa7_EnoughSamples) {
      /* Reference of merge block: Merge eCS_Targetlink/Crash Acceleration/Acceleration Clipping/Mer
         ge
         update of variable(s) associated with eCS_Targetlink/Crash Acceleration/Acceleration Clippi
         ng/Reset timer/HoldingTime1
         # combined # Unit delay: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/u8OldTrigg
         er
         # combined # eCS_Targetlink/Crash Acceleration/Acceleration Clipping/CrashTrigger
         # combined # Unit delay: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/u8OldTrigg
         er */
      Sa7_CrashTrigger = 1;

      /* Reference of merge block: Merge1 eCS_Targetlink/Crash Acceleration/Acceleration Clipping/Me
         rge1
         update of variable(s) associated with eCS_Targetlink/Crash Acceleration/Acceleration Clippi
         ng/Reset timer/HoldingTime
         # combined # Unit delay: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/u8OldTimer
       */
      X_Sa7_u8OldTimer = 200;
   }
   else {
      /* SLLocal: Default storage class for local variables | Width: 8 */
      uint8 Sa7_u8OldTimer;

      /* Unit delay: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/u8OldTimer */
      Sa7_u8OldTimer = X_Sa7_u8OldTimer;
      LOG_VAR(a, _Sa7_u8OldTimer, Sa7_u8OldTimer);

      /* # combined # Logical: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/If Action Sub
         system/Logical Operator1
         # combined # Relational: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/If Action 
         Subsystem/Relational Operator4
         # combined # Logical: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/If Action Sub
         system/Logical Operator
         # combined # eCS_Targetlink/Crash Acceleration/Acceleration Clipping/CrashTrigger
         # combined # Unit delay: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/u8OldTrigg
         er */
      if ((1 == Sa7_CrashTrigger) && (Sa7_u8OldTimer == 0)) {
         /* Reference of merge block: Merge1 eCS_Targetlink/Crash Acceleration/Acceleration Clipping
            /Merge1
            update of variable(s) associated with eCS_Targetlink/Crash Acceleration/Acceleration Cli
            pping/If Action
            Subsystem/Clear Trigger /u8OldTimer
            # combined # Unit delay: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/u8OldTi
            mer */
         X_Sa7_u8OldTimer = Sa7_u8OldTimer;

         /* Reference of merge block: Merge eCS_Targetlink/Crash Acceleration/Acceleration Clipping/
            Merge
            update of variable(s) associated with eCS_Targetlink/Crash Acceleration/Acceleration Cli
            pping/If Action
            Subsystem/Clear Trigger /Constant1
            # combined # Unit delay: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/u8OldTr
            igger
            # combined # eCS_Targetlink/Crash Acceleration/Acceleration Clipping/CrashTrigger
            # combined # Unit delay: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/u8OldTr
            igger */
         Sa7_CrashTrigger = 0;
      }
      else {
         /* Switch: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/If Action Subsystem/Decr
            ease Timer/HoldingTimer */
         if (Sa7_u8OldTimer != 0) {
            /* Switch: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/If Action Subsystem/D
               ecrease Timer/HoldingTimer
               # combined # Reference of merge block: Merge1 eCS_Targetlink/Crash Acceleration/Accel
               eration Clipping/Merge1
               update of variable(s) associated with eCS_Targetlink/Crash Acceleration/Acceleration 
               Clipping/If Action
               Subsystem/Decrease Timer/HoldingTimer
               # combined # Unit delay: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/u8Ol
               dTimer
               # combined # Sum: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/If Action S
               ubsystem/Decrease Timer/Sum */
            X_Sa7_u8OldTimer = (uint8) (Sa7_u8OldTimer - 1);
         }
         else {
            /* Switch: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/If Action Subsystem/D
               ecrease Timer/HoldingTimer
               # combined # Reference of merge block: Merge1 eCS_Targetlink/Crash Acceleration/Accel
               eration Clipping/Merge1
               update of variable(s) associated with eCS_Targetlink/Crash Acceleration/Acceleration 
               Clipping/If Action
               Subsystem/Decrease Timer/HoldingTimer
               # combined # Unit delay: eCS_Targetlink/Crash Acceleration/Acceleration Clipping/u8Ol
               dTimer */
            X_Sa7_u8OldTimer = 0;
         }
      }
   }
   LOG_VAR(a, _Sa7_CrashTrigger, Sa7_CrashTrigger);
}

#endif /* ECS_TARGETLINK_C */
/*----------------------------------------------------------------------------*\
  END OF FILE
\*----------------------------------------------------------------------------*/
