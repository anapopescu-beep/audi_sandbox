/*
 *   fsm_sfunc.c Simple C-MEX S-function for function call.
 *
 *   ABSTRACT:
 *     The purpose of this sfunction is to call a simple legacy
 *     function during simulation:
 *
 *
 *
 *   Simulink version           : 8.6 (R2015b) 13-Aug-2015
 *   C source code generated on : 17-May-2023 08:27:36

 * THIS S-FUNCTION IS GENERATED BY THE LEGACY CODE TOOL AND MAY NOT WORK IF MODIFIED

 */

/*
   %%%-MATLAB_Construction_Commands_Start
   def = legacy_code('initialize');
   def.SFunctionName = 'fsm_sfunc';
   def.IncPaths = {'S:\Components\Application\Autoliv\EFX\Implementation\inc', 'S:\Components\Application\Autoliv\EFX\Implementation\cfg', 'S:\Components\Application\Autoliv\FSM\Implementation\inc', 'S:\Components\Application\Autoliv\FSM\Implementation\cfg', 'S:\Components\Application\Autoliv\MIC\Implementation\inc', 'S:\Components\Application\Autoliv\MIC\Implementation\cfg', 'S:\Components\Application\Autoliv\NVP\Implementation\inc', 'S:\Components\Application\Autoliv\NVP\Implementation\cfg', 'S:\Components\Application\Autoliv\RCM\Implementation\inc', 'S:\Components\Application\Autoliv\RCM\Implementation\cfg', 'S:\Components\Application\Autoliv\SAD\Implementation\inc', 'S:\Components\Application\Autoliv\SAD\Implementation\cfg', 'S:\Components\Application\Autoliv\SBC\Implementation\inc', 'S:\Components\Application\Autoliv\SBC\Implementation\cfg', 'S:\Components\Application\Autoliv\STM\Implementation\inc', 'S:\Components\Application\Autoliv\STM\Implementation\cfg', 'S:\Components\Application\Autoliv\TL_Lib\Implementation\inc', 'S:\Components\Application\Autoliv\TL_Lib\Implementation\cfg', 'S:\Components\Application\Autoliv\AdcIf\Implementation\inc', 'S:\Components\Application\Autoliv\AdcIf\Implementation\cfg', 'S:\Components\Application\Autoliv\IoHwAb\Implementation\inc', 'S:\Components\Application\Autoliv\IoHwAb\Implementation\cfg', 'S:\Components\Application\Autoliv\BswMIf\Implementation\inc', 'S:\Components\Application\Autoliv\BswMIf\Implementation\cfg', 'S:\Components\Application\Autoliv\CompilerIf\Implementation\inc', 'S:\Components\Application\Autoliv\CompilerIf\Implementation\cfg', 'S:\Components\Application\Autoliv\DcmIf\Implementation\inc', 'S:\Components\Application\Autoliv\DcmIf\Implementation\cfg', 'S:\Components\Application\Autoliv\DemIf\Implementation\inc', 'S:\Components\Application\Autoliv\DemIf\Implementation\cfg', 'S:\Components\Application\Autoliv\DioIf\Implementation\inc', 'S:\Components\Application\Autoliv\DioIf\Implementation\cfg', 'S:\Components\Application\Autoliv\EcuMIf\Implementation\inc', 'S:\Components\Application\Autoliv\EcuMIf\Implementation\cfg', 'S:\Components\Application\Autoliv\LPM\Implementation\inc', 'S:\Components\Application\Autoliv\LPM\Implementation\cfg', 'S:\Components\Application\Autoliv\NmIf\Implementation\inc', 'S:\Components\Application\Autoliv\NmIf\Implementation\cfg', 'S:\Components\Application\Autoliv\NvmIf\Implementation\inc', 'S:\Components\Application\Autoliv\NvmIf\Implementation\cfg', 'S:\Components\Application\Autoliv\OsIf\Implementation\inc', 'S:\Components\Application\Autoliv\OsIf\Implementation\cfg', 'S:\Components\Application\Autoliv\PlatformsIf\Implementation\inc', 'S:\Components\Application\Autoliv\PlatformsIf\Implementation\cfg', 'S:\Components\Application\Autoliv\PwmIf\Implementation\inc', 'S:\Components\Application\Autoliv\PwmIf\Implementation\cfg', 'S:\Components\Application\Autoliv\RteIf\Implementation\inc', 'S:\Components\Application\Autoliv\RteIf\Implementation\cfg', 'S:\Components\Application\Autoliv\SpiIf\Implementation\inc', 'S:\Components\Application\Autoliv\SpiIf\Implementation\cfg', 'S:\Components\Application\Autoliv\Startup\Implementation\inc', 'S:\Components\Application\Autoliv\Startup\Implementation\cfg', 'S:\Components\Application\Autoliv\..\Supplier\Tresos_Configuration_8.5.1\Workspace\Application\Tresos_BSW_generated\include', 'S:\Components\Application\Autoliv\..\Supplier\Tresos_Configuration_8.5.1\Workspace\Application\Tresos_BSW_generated', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Os_TS_T40D2M6I0R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Dem_TS_TxDxM5I18R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Dcm_TS_TxDxM4I14R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Com_TS_TxDxM6I3R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\ComM_TS_TxDxM5I17R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Crc_TS_TxDxM6I11R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Base_TS_TxDxM5I0R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\PduR_TS_TxDxM5I3R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\CanSM_TS_TxDxM3I6R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\CanIf_TS_TxDxM6I9R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\CanTp_TS_TxDxM6I8R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Atomics_TS_TxDxM1I0R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\BswM_TS_TxDxM1I14R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\IpduM_TS_TxDxM3I3R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Rte_TS_TxDxM6I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Compiler_TS_TxDxM1I0R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Compiler_TS_TxDxM1I0R0\include\CORTEXM', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Compiler_TS_TxDxM1I0R0\include\CORTEXM\iar', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Platforms_TS_T40D2M1I0R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Platforms_TS_T40D2M1I0R0\include\CORTEXM', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\MemIf_TS_TxDxM5I11R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\EcuM_TS_TxDxM5I14R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\NvM_TS_TxDxM6I17R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Fee_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Adc_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Can_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Dio_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Fls_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Mcl_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Mcu_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Port_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Pwm_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Resource_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Spi_TS_T40D2M10I2R0\include', 'S:\Tools\Tessy\Workspace\..\..\EB_BSW_8.5.1\Workspace\plugins\Gpt_TS_T40D2M10I2R0\include', 'S:\Components\Application\Autoliv\ACC\Implementation\cfg', 'S:\Components\Application\Autoliv\ACC\Implementation\inc', 'S:\Components\Application\Autoliv\ATM\Implementation\inc', 'S:\Components\Application\Autoliv\CIL\Implementation\inc', 'S:\Components\Application\Autoliv\DIA\Implementation\inc'};
   def.SrcPaths = {'s:\Components\Application\Autoliv\FSM\Implementation\src\'};
   legacy_code('sfcn_cmex_generate', def);
   legacy_code('compile', def);
   %%%-MATLAB_Construction_Commands_End
 */

/*
 * Must specify the S_FUNCTION_NAME as the name of the S-function.
 */
#define S_FUNCTION_NAME                fsm_sfunc
#define S_FUNCTION_LEVEL               2

/*
 * Need to include simstruc.h for the definition of the SimStruct and
 * its associated macro definitions.
 */
#include "simstruc.h"
#define isDWorkNeeded(S)               ((!((ssRTWGenIsCodeGen(S) || ssGetSimMode(S)==SS_SIMMODE_EXTERNAL) && isSimulationTarget==0)) || ssIsRapidAcceleratorActive(S))

/* Function: mdlInitializeSizes ===========================================
 * Abstract:
 *    The sizes information is used by Simulink to determine the S-function
 *    block's characteristics (number of inputs, outputs, states, etc.).
 */
static void mdlInitializeSizes(SimStruct *S)
{
  /* Number of expected parameters */
  ssSetNumSFcnParams(S, 0);

  /*
   * Set the number of work vectors.
   */
  if (!ssSetNumDWork(S, 0))
    return;
  ssSetNumPWork(S, 0);

  /*
   * Set the number of input ports.
   */
  if (!ssSetNumInputPorts(S, 0))
    return;

  /*
   * Set the number of output ports.
   */
  if (!ssSetNumOutputPorts(S, 0))
    return;

  /*
   * This S-function can be used in referenced model simulating in normal mode.
   */
  ssSetModelReferenceNormalModeSupport(S, MDL_START_AND_MDL_PROCESS_PARAMS_OK);

  /*
   * Set the number of sample time.
   */
  ssSetNumSampleTimes(S, 1);

  /*
   * All options have the form SS_OPTION_<name> and are documented in
   * matlabroot/simulink/include/simstruc.h. The options should be
   * bitwise or'd together as in
   *   ssSetOptions(S, (SS_OPTION_name1 | SS_OPTION_name2))
   */
  ssSetOptions(S,
               SS_OPTION_USE_TLC_WITH_ACCELERATOR |
               SS_OPTION_CAN_BE_CALLED_CONDITIONALLY |
               SS_OPTION_EXCEPTION_FREE_CODE |
               SS_OPTION_WORKS_WITH_CODE_REUSE |
               SS_OPTION_SFUNCTION_INLINED_FOR_RTW |
               SS_OPTION_DISALLOW_CONSTANT_SAMPLE_TIME);
  ssSetSimulinkVersionGeneratedIn(S, "8.6");
}

/* Function: mdlInitializeSampleTimes =====================================
 * Abstract:
 *    This function is used to specify the sample time(s) for your
 *    S-function. You must register the same number of sample times as
 *    specified in ssSetNumSampleTimes.
 */
static void mdlInitializeSampleTimes(SimStruct *S)
{
  ssSetSampleTime(S, 0, INHERITED_SAMPLE_TIME);
  ssSetOffsetTime(S, 0, FIXED_IN_MINOR_STEP_OFFSET);

#if defined(ssSetModelReferenceSampleTimeDefaultInheritance)

  ssSetModelReferenceSampleTimeDefaultInheritance(S);

#endif

}

/* Function: mdlOutputs ===================================================
 * Abstract:
 *    In this function, you compute the outputs of your S-function
 *    block. Generally outputs are placed in the output vector(s),
 *    ssGetOutputPortSignal.
 */
static void mdlOutputs(SimStruct *S, int_T tid)
{
}

/* Function: mdlTerminate =================================================
 * Abstract:
 *    In this function, you should perform any actions that are necessary
 *    at the termination of a simulation.
 */
static void mdlTerminate(SimStruct *S)
{
}

/*
 * Required S-function trailer
 */
#ifdef MATLAB_MEX_FILE
# include "simulink.c"
#else
# include "cg_sfun.h"
#endif
